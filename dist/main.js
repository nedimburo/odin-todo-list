(()=>{"use strict";class t{constructor(){this.projects=[]}get projects(){return this._projects}set projects(t){this._projects=t}validateProjectTitle(t){for(let e=0;e<this.projects.length;e++)if(t==this.projects[e]._title)return!1;return!0}addProject(t){this.projects.push(t)}addTaskToProject(t,e){this.projects[e]._tasks.push(t)}}class e{constructor(t){this.title=t,this.tasks=[]}get title(){return this._title}get tasks(){return this._tasks}set title(t){this._title=t}set tasks(t){this._tasks=t}}class o{constructor(t,e,o,n){this.title=t,this.description=e,this.dueDate=o,this.priority=n}get title(){return this._title}get description(){return this._description}get dueDate(){return this._dueDate}get priority(){return this._priority}set title(t){this._title=t}set description(t){this._description=t}set dueDate(t){this._dueDate=t}set priority(t){this._priority=t}}let n=new class{constructor(){this.todoContainer=new t,this.selectedProjectIndex}get todoContainer(){return this._todoContainer}get selectedProjectIndex(){return this._selectedProjectIndex}set todoContainer(t){this._todoContainer=t}set selectedProjectIndex(t){this._selectedProjectIndex=t}getLocalStorage(){if(null!=JSON.parse(localStorage.getItem("todo"))){let t=JSON.parse(localStorage.getItem("todo"));this.todoContainer.projects=t._projects}}storeLocalStorage(){localStorage.clear();let t=JSON.stringify(this.todoContainer);localStorage.setItem("todo",t)}addNewProject(t){let o=new e(t);this.todoContainer.validateProjectTitle(t)?this.todoContainer.addProject(o):alert("Project already exists with the entered title.")}removeProject(t){this.todoContainer._projects.splice(t,1),this.storeLocalStorage(),location.reload()}addNewTask(t){let e=new o(t.title,t.description,t.dueDate,t.priority);this.todoContainer.addTaskToProject(e,this.selectedProjectIndex)}removeTask(t,e){this.todoContainer._projects[t]._tasks.splice(e,1),this.storeLocalStorage()}};const d=(()=>{let t=document.getElementById("projects-container"),e=document.getElementById("add-project-button"),o=document.getElementById("todo-container");const d=()=>{let t=document.createElement("div");t.setAttribute("id","task-list-container"),o.appendChild(t)},s=()=>{let t=document.getElementById("task-list-container");t.innerHTML="";for(let e=0;e<n._todoContainer._projects[n._selectedProjectIndex]._tasks.length;e++){let o=document.createElement("div"),d=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),r=document.createElement("button"),c=document.createElement("button"),l=document.createElement("button"),p=document.createElement("img"),m=document.createElement("img"),u=document.createElement("img");p.src="../dist/icons/dots.svg",m.src="../dist/icons/edit.svg",u.src="../dist/icons/close.svg",o.classList.add("task-container"),"1"==n._todoContainer._projects[n._selectedProjectIndex]._tasks[e]._priority?o.classList.add("high-priority"):"2"==n._todoContainer._projects[n._selectedProjectIndex]._tasks[e]._priority?o.classList.add("medium-priority"):o.classList.add("low-priority"),d.classList.add("task-container-title"),i.classList.add("task-container-date"),r.classList.add("task-control-button"),c.classList.add("task-control-button"),l.classList.add("task-control-button"),a.classList.add("task-button-container"),d.textContent=n._todoContainer._projects[n._selectedProjectIndex]._tasks[e]._title,i.textContent=n._todoContainer._projects[n._selectedProjectIndex]._tasks[e]._dueDate,r.appendChild(p),c.appendChild(m),l.appendChild(u),l.addEventListener("click",(()=>{n.removeTask(n._selectedProjectIndex,e),s()})),a.appendChild(r),a.appendChild(c),a.appendChild(l),o.appendChild(d),o.appendChild(i),o.appendChild(a),t.appendChild(o)}if(0==t.childNodes.length){let e=document.createElement("h2");e.textContent="There are no tasks assigned for this project.",e.classList.add("task-message"),t.appendChild(e)}},i=()=>{let t=document.createElement("button"),e=document.createElement("img");e.src="../dist/icons/plus.svg",e.classList.add("add-task-icon"),t.appendChild(e),t.setAttribute("id","add-task-button"),t.innerHTML+="Add Task",t.addEventListener("click",a),o.appendChild(t)},a=()=>{r();let t=document.getElementById("add-task-button");t.disabled=!0;let e=document.createElement("div"),d=document.createElement("div"),i=document.createElement("button"),a=document.createElement("button");e.setAttribute("id","add-task-container"),e.innerHTML='<label for="task-title">Title:</label>\n                        <input type="text" id="task-title" class="form-input"><br>\n                        <label for="task-description">Description:</label>\n                        <input type="text" id="task-description" class="form-input"><br>\n                        <label for="task-date">Due Date:</label>\n                        <input type="date" id="task-date" class="form-input"><br>\n                        <label for="task-priority">Priority:</label>\n                        <select id="task-priority" class="form-input">\n                            <option value="3">Low</option>\n                            <option value="2">Medium</option>\n                            <option value="1">High</option>\n                        </select>',i.textContent="Submit",a.textContent="Cancel",d.setAttribute("id","control-buttons-container"),i.classList.add("task-buttons"),a.classList.add("task-buttons"),i.classList.add("submit"),a.classList.add("cancel"),i.addEventListener("click",(()=>{let d={};d.title=document.getElementById("task-title").value,d.description=document.getElementById("task-description").value,d.dueDate=document.getElementById("task-date").value,d.priority=document.getElementById("task-priority").value,n.addNewTask(d),n.storeLocalStorage(),t.disabled=!1,o.removeChild(e),r(),s()})),a.addEventListener("click",(()=>{t.disabled=!1,o.removeChild(e),r()})),d.appendChild(i),d.appendChild(a),e.appendChild(d),o.appendChild(e)},r=()=>{o.classList.toggle("todo-container-simple"),o.classList.toggle("todo-container-adding-task")};return{loadHome:()=>{o.innerHTML="",d();let t=document.getElementById("task-list-container"),e=document.createElement("h2");e.textContent='"All Tasks"',e.setAttribute("id","home-page-title"),o.appendChild(e);for(let e=0;e<n.todoContainer._projects.length;e++)for(let o=0;o<n.todoContainer._projects[e]._tasks.length;o++){let d=document.createElement("div"),s=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div");d.classList.add("home-task-list-container"),"1"==n._todoContainer._projects[e]._tasks[o]._priority?d.classList.add("high-priority"):"2"==n._todoContainer._projects[e]._tasks[o]._priority?d.classList.add("medium-priority"):d.classList.add("low-priority"),s.textContent=n.todoContainer._projects[e]._tasks[o]._title,i.textContent=n.todoContainer._projects[e]._tasks[o]._dueDate,a.textContent="Project: "+n.todoContainer._projects[e]._title,d.appendChild(s),d.appendChild(i),d.appendChild(a),t.appendChild(d)}if(0==t.childNodes.length){let e=document.createElement("h2");e.textContent="All projects are empty. No tasks have been assigned.",e.classList.add("task-message"),t.appendChild(e)}},loadToday:()=>{o.innerHTML="",d(),document.getElementById("task-list-container");let t=document.createElement("h2");t.textContent='"Tasks with due date of Today"',t.setAttribute("id","home-page-title"),o.appendChild(t)},loadThisWeek:()=>{o.innerHTML="",d(),document.getElementById("task-list-container");let t=document.createElement("h2");t.textContent='"Tasks with due date of This week"',t.setAttribute("id","home-page-title"),o.appendChild(t)},loadThisMonth:()=>{o.innerHTML="",d(),document.getElementById("task-list-container");let t=document.createElement("h2");t.textContent='"Tasks with due date of This month"',t.setAttribute("id","home-page-title"),o.appendChild(t)},addProjectInput:()=>{e.disabled=!0;let o=document.createElement("div"),d=document.createElement("input"),s=document.createElement("button"),i=document.createElement("button"),a=document.createElement("img"),r=document.createElement("img");o.setAttribute("id","project-input-container"),d.setAttribute("id","project-input-field"),s.classList.add("project-buttons"),s.classList.add("submit"),i.classList.add("project-buttons"),i.classList.add("cancel"),d.placeholder="Enter project name...",a.src="../dist/icons/check.svg",r.src="../dist/icons/close.svg",s.addEventListener("click",(()=>{n.addNewProject(d.value),t.removeChild(o),e.disabled=!1,n.storeLocalStorage(),location.reload()})),i.addEventListener("click",(()=>{t.removeChild(o),e.disabled=!1})),s.appendChild(a),i.appendChild(r),o.appendChild(d),o.appendChild(s),o.appendChild(i),t.appendChild(o)},generateProjects:()=>{for(let e=0;e<n.todoContainer._projects.length;e++){let o=document.createElement("div"),d=document.createElement("button"),s=document.createElement("button"),i=document.createElement("img");i.src="../dist/icons/close.svg",d.textContent=n.todoContainer._projects[e]._title,d.setAttribute("id",n.todoContainer._projects[e]._title),o.classList.add("project-container-item"),d.classList.add("project-selector-button"),i.classList.add("remove-project-button"),s.addEventListener("click",(()=>{n.removeProject(e)})),s.appendChild(i),o.appendChild(d),o.appendChild(s),t.appendChild(o)}},generateProjectButtons:()=>{for(let t=0;t<n._todoContainer._projects.length;t++)document.getElementById(`${n._todoContainer._projects[t]._title}`).addEventListener("click",(()=>{var e;e=t,o.innerHTML="",n._selectedProjectIndex=e,i(),d(),s()}))}}})();n.getLocalStorage(),console.log(n.todoContainer),d.loadHome(),d.generateProjects(),d.generateProjectButtons(),document.getElementById("home-button").addEventListener("click",d.loadHome),document.getElementById("today-button").addEventListener("click",d.loadToday),document.getElementById("week-button").addEventListener("click",d.loadThisWeek),document.getElementById("month-button").addEventListener("click",d.loadThisMonth),document.getElementById("add-project-button").addEventListener("click",d.addProjectInput)})();